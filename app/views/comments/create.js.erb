<% if @comment.errors.any? %>
  $("#comments").after('<div id="error"><%= j(generate_error_messages(@comment)) %></div>');
<% else %>
  $("#comments").after('<div id="notice"><%= j(flash.discard(:notice)) %></div>');
  $("#comments").append("<%= j(render(:partial => @comment)) %>");
  $("#new_comment")[0].reset();
<% end %>
